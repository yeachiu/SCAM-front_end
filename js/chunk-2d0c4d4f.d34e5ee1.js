(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-2d0c4d4f"],{"3d08":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",[a("Card",[a("p",{staticClass:"card-title",attrs:{slot:"title"},slot:"title"},[a("Icon",{attrs:{type:"home"}}),a("span",[t._v("活动管理")])],1),a("div",[[a("Row",[a("Col",{attrs:{span:"15"}},[a("Button",{attrs:{disabled:t.setting.loading,type:"success"},on:{click:t.getData}},[a("Icon",{attrs:{type:"md-refresh"}}),t._v(" 刷新数据")],1),a("Button",{attrs:{type:"primary"},on:{click:function(e){t.exportData(1)}}},[a("Icon",{attrs:{type:"ios-download-outline"}}),t._v(" 导出表格")],1)],1),a("Col",{attrs:{span:"9"}},[a("Input",{staticClass:"margin-bottom-10",attrs:{placeholder:"请输入您想要搜索的内容..."},model:{value:t.search.value,callback:function(e){t.$set(t.search,"value",e)},expression:"search.value"}},[a("Button",{attrs:{slot:"append",icon:"ios-search"},slot:"append"})],1)],1)],1),a("Table",{ref:"table",staticClass:"margin-bottom-10",attrs:{columns:t.columns,loading:t.setting.loading,border:t.setting.showBorder,data:t.data.records}}),a("Page",{staticClass:"tr",attrs:{total:t.data.total,current:t.data.current,"page-size":t.data.size,"show-elevator":"","show-sizer":""},on:{"on-change":t.pageChange,"update:current":function(e){t.$set(t.data,"current",e)},"on-page-size-change":t.pageSizeChange}})]],2)]),t.detailActivityModel?a("DetailActivity",{attrs:{data:t.detailVO},on:{cancel:t.onModalCancel}}):t._e(),a("Modal",{attrs:{width:"360"},model:{value:t.removeModal,callback:function(e){t.removeModal=e},expression:"removeModal"}},[a("p",{staticStyle:{color:"#f60","text-align":"center"},attrs:{slot:"header"},slot:"header"},[a("Icon",{attrs:{type:"information-circled"}}),a("span",[t._v("提示")])],1),a("div",{staticStyle:{"text-align":"center"}},[a("p",[t._v("此操作为不可逆操作，是否确认删除？")])]),a("div",{attrs:{slot:"footer"},slot:"footer"},[a("Button",{attrs:{type:"error",size:"large",long:"",loading:t.setting.loading},on:{click:t.removeActivity}},[t._v("确认删除")])],1)])],1)},n=[],r=(a("96cf"),a("3b8d")),s=a("bd86"),o=a("5a0c"),c=a.n(o),l=a("d689"),d=a("64f9"),u=a("05bf"),p=a("b6db"),h=1,g=2,v=3,m=4,f=0,b={data:function(){var t,e=this;return t={aparId:"",addActivityModal:!1,updateActivityModal:!1,detailActivityModel:!1,updateId:null,detailVO:{},selections:[],removeModal:!1,removeObject:{},setting:{loading:!0,showBorder:!0},search:{type:"title",value:""},columns:[{title:"详情",width:80,render:function(t,a){return t("Icon",{props:{type:"ios-list-box-outline",size:"24",color:"#8f90a2"},on:{click:function(){e.openDetailModal(a.row)}}},"")}},{title:"活动名称",key:"title",sortable:!0},{title:"状态",key:"status",render:function(t,e){var a;switch(e.row.status){case g:a="已发布";break;case v:a="进行中";break;case m:a="已结束";break;case f:a="已取消";break;case h:a="草稿";break;default:a="error"}return t("span",a)},sortable:!0},{title:"已参与名额",key:"limitQuota",render:function(t,e){return t("span",e.row.memberNow+" / "+e.row.limitQuota)}},{title:"创建日期",key:"createTime",render:function(t,e){return t("span",c()(e.row.createTime).format("YYYY-MM-DD HH:mm:ss"))},sortable:!0},{title:"操作",key:"action",width:260,align:"center",render:function(t,a){return t("div",[t("Button",{props:{type:"primary",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.changeStatus(a.row,h)}}},"恢复"),t("Button",{props:{type:"warning",size:"small"},style:{marginRight:"5px"},on:{click:function(){e.removeObject={obj:a.row,index:a.index},e.removeModal=!0}}},"删除")])}}],data:{},dataFilter:{page:1,pageSize:15}},Object(s["a"])(t,"removeObject",null),Object(s["a"])(t,"roles",null),t},components:{AddActivity:d["a"],UpdateActivity:u["a"],DetailActivity:p["a"]},created:function(){this.aparId=this.$store.state.user.aparId,this.getData()},methods:{getData:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){var e;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.setting.loading=!0,t.prev=1,t.next=4,Object(l["b"])("/app/activity/list/cancel",{id:this.aparId,page:this.dataFilter.page,pageSize:this.dataFilter.pageSize});case 4:e=t.sent,this.data=e.data,t.next=11;break;case 8:t.prev=8,t.t0=t["catch"](1),this.$throw(t.t0);case 11:this.setting.loading=!1;case 12:case"end":return t.stop()}},t,this,[[1,8]])}));function e(){return t.apply(this,arguments)}return e}(),pageChange:function(t){this.dataFilter.page=t,this.getData()},pageSizeChange:function(t){this.dataFilter.pageSize=t,this.getData()},changeStatus:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(e,a){var i,n;return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:return this.setting.loading=!0,i="活动"+e.title+"已恢复，请去活动管理页面查看",n={aid:e.id,status:a},t.prev=3,t.next=6,Object(l["b"])("/app/activity/statusChange",n);case 6:t.sent,this.$Message.destroy(),this.$Message.success(i),a==f||(e.status=g),t.next=15;break;case 12:t.prev=12,t.t0=t["catch"](3),this.$throw(t.t0);case 15:this.setting.loading=!1,this.getData();case 17:case"end":return t.stop()}},t,this,[[3,12]])}));function e(e,a){return t.apply(this,arguments)}return e}(),removeActivity:function(){var t=Object(r["a"])(regeneratorRuntime.mark(function t(){return regeneratorRuntime.wrap(function(t){while(1)switch(t.prev=t.next){case 0:if(this.removeModal=!1,null!=this.removeObject){t.next=4;break}return this.$Message.warning("删除对象为空，无法继续执行！"),t.abrupt("return",!1);case 4:return this.setting.loading=!0,t.prev=5,t.next=8,Object(l["b"])("/app/activity/remove/{id}",null,{id:this.removeObject.obj.id});case 8:t.sent,this.$Message.success("删除成功"),this.data.records.splice(this.removeObject.index,1),t.next=16;break;case 13:t.prev=13,t.t0=t["catch"](5),this.$throw(t.t0);case 16:this.setting.loading=!1;case 17:case"end":return t.stop()}},t,this,[[5,13]])}));function e(){return t.apply(this,arguments)}return e}(),openAddModal:function(t){null==t?this.addActivityModal=!0:(this.updateId=t,this.updateActivityModal=!0)},openDetailModal:function(t){this.detailVO=t,this.detailActivityModel=!0},onModalCancel:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];switch(t){case"add":this.addActivityModal=!1;break;case"update":this.updateActivityModal=!1;break;case"detail":this.detailActivityModel=!1;break}e&&this.getData()},exportData:function(t){var e=this;1===t&&this.$refs.table.exportCsv({filename:"活动数据-"+(new Date).getTime(),columns:this.columns.filter(function(t,a){return a>1&&a<e.columns.length-1}),data:this.data})}}},y=b,w=a("2877"),k=Object(w["a"])(y,i,n,!1,null,null,null);k.options.__file="cancel.vue";e["default"]=k.exports}}]);